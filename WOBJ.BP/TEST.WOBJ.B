PROGRAM TEST.WOBJ
PRINT "TEST.OBJ 1.4"
OPEN "RESULT.FILE" TO RFILE ELSE STOP "no rfile"
OPEN "MD" TO MD ELSE STOP
READ JSON FROM RFILE, 'json.json' ELSE STOP "NO json.json"
PRINT 'LEN OF JSON=':LEN(JSON)
GOSUB debug.off
OPTIONS='PRETTIFY'
OPTIONS<-1>='CROVERRIDE'
S=SYSTEM(12)
PRINT "START: ":S
CALL WOBJ(JSONOBJECT,"FROMSTRING","",JSON,"",RERR)
E=SYSTEM(12)
PRINT "END: ":E
PRINT "TOTAL: ":E-S
WRITE JSONOBJECT ON RFILE, 'OBJECT'
WRITE JSONOBJECT ON RFILE, 'FINAL.OBJECT'
CALL WOBJ(JSONOBJECT,"TOSTRING","",JSON,OPTIONS,RERR)
WRITE JSON ON RFILE, "FINAL.JSON"
PRINT "DOING SEARCH FOR RestVersion"
GOSUB debug.on
LOOP
	PRINT "ENTER COMMAND: ":; INPUT COMMAND
UNTIL COMMAND="" DO
	PRINT "ENTER NODE: ":; INPUT NODE
	PRINT "ENTER VALUE: ":; INPUT VALUE
	CALL WOBJ(JSONOBJECT,COMMAND,NODE,VALUE,"",RERR)
	PRINT "RERR=":RERR<2>
	PRINT "RETURN VALUE"
	PRINT VALUE
	WRITE VALUE ON RFILE, "RETURN.VALUE"
	WRITE JSONOBJECT ON RFILE, "FINAL.OBJECT"
	GOSUB debug.off
	CALL WOBJ(JSONOBJECT,"TOSTRING","",JSON,"",RERR)
	GOSUB debug.on
	WRITE JSON ON RFILE, "FINAL.JSON"
REPEAT
GOSUB debug.off
STOP
*
debug.on: *
WRITEV 1 ON MD, "WOBJ.DEBUG", 2
RETURN
*
debug.off: *
WRITEV 0 ON MD, "WOBJ.DEBUG", 2
RETURN


